# EXAMEN TEMA 3 ISO. ADMINISTRACIÓN DE USUARIOS GRUPOS Y PERMISOS DE FORMA LOCAL EN LINUX

La duración del examen será de 2h 30 minutos. Empezará a las 16:00 y terminará a las 18:30. Cualquier examen fuera de tiempo no será considerado.

Cualquier ordenador con internet supondrá la expulsión del examen y un 0 en la nota.

El examen consta de dos ejercicios, cada uno con 6 apartados (a,b,c,d,e,f). Cada apartado tiene su puntuación correspondiente.

El examen se deberá entregar en PDF. Se podrá usar como editor de texto o `typora` o `abyword`.

> [!IMPORTANT]
>
> Este examen no muestra una opinión política. Solo se nombran a personas del ámbito público que, bajo investigación o sentencia firme, se encuentran o se han encontrado involucradas en procesos judiciales, tanto de un lado, como de otro.

---

## Ejercicio 1 (4,5pts)

#### Apartado a) (0,5pts)

1-Se pide que crees los siguiente grupos:

```text
caso_koldo, gurtel, eres
```

#### Apartado b) (0,5pts)

1-Acto seguido, crea los siguientes usuarios: 

`koldo`, `abalos`, `barcenas`, `rajoy` , `jose_antonio`, `sepulveda`,  de forma que, todos tendrán la terminal `/bin/bash` excepto `sepulveda`, que tendrá acceso a la terminal `/usr/sbin/nologin`. Los grupos principales de cada usuario serán sus nombres.

Cada grupo tendrá los siguiente usuarios:

`caso_koldo: koldo, abalos` 

`gurtel: barcenas, rajoy`

`eres: jose_antonio, sepulveda`



2-Ponle a todos los usuarios la misma contraseña (lo mas sencilla posible).



3-Importante, añade también al usuario `koldo` al grupo sudo. Esto le permitirá ejecutar comandos con sudo.

#### Apartado c) (1pts)

1(Captura de pantalla)-- Con `koldo` y usando `sudo` (o con root), usa getent en cada grupo, muestra que los grupos creados tienen a dichos usuarios dentro de cada grupo.  ¿Que se debería poner en getent para ver si un grupo tiene administrador? ¿Qué te sale en este caso?

2(Captura de pantalla)--Con `koldo` y usando `sudo` (o con root), usa también getent para comprobar la terminal de `sepulveda` .

3(Captura de pantalla)-¿Tiene sepúlveda acceso a terminal? Inténta verlo con un comando.

#### Apartado d) (0,75pts)

1-Ejecutad un comando para ver la política de expiración de contraseñas de `barcenas`

2-Después, con `root`, ejecutad un comando para que `barcenas` tenga que cambiar la contraseña mínimo, una vez al año. El usuario deberá cambiar la contraseña en mínimo 3 días después de que caduque o su cuenta expirará.

3-Una vez hecho todo lo anterior, comprueba que efectivamente, se ha cambiado viendo nuevamente la política de contraseñas de `barcenas`. 

4-Después con `root`, cambia la fecha de expiración de la cuenta a uno de enero año que viene.

#### **Apartado e)** (0,75pts)

1-(Captura de pantalla)- Mira los permisos de `/home/barcenas` y muestra una captura de pantalla de los mismos.

2-(Captura de pantalla)-¿Qué puede hacer cada usario del sistema sobre dicha carpeta? ¿Qué usuarios pueden acceder a esta carpeta? ¿Qué usuarios pueden borrar el contenido o crear contenido sobre la carpeta? ¿Qué usuarios puede ver el contenido de la carpeta? Apoyate en r,w,x para dar la explicación. 

3-¿Qué permisos de que fichero deberías buscar ver para saber quien puede borrar la carpeta `/home/barcenas`?

#### **Apartado f)** (1 pts) 

-1. En la raíz `/` del sistema, crearás un carpeta llamada `traidores`.  Usa el usuario que quieras para esto.

-2.(Haz captura de pantalla) . Justifica qué permisos debes mirar para saber quién puede crear la carpeta traidores sobre la raíz `/` del sistema.

-3.Haciendo uso de la <u>forma octal</u> de los permisos, da a la carpeta `/traidores` permisos de lectura, escritura y ejecución para todos los usuarios del sistema.

-4¿Hace falta hacer que el usuario y grupo propietario de esta carpeta sea `root`? Justifica la respuesta y en caso de que haga falta, cambia el grupo propietario y el propietario a dicha carpeta a `root:root`

-5.(Haz captura de pantalla) . Con `abalos`. Haz un `newgrp` a `caso_koldo` y crea, de forma relativa a `traidores`, la carpeta `caso_koldo`. ¿Quién es el grupo propietario de dicha carpeta? ¿Y el owner?

-6 De nuevo, Con el usuario `abalos`, a dicha carpeta anterior (`/traidores/caso_koldo`), le vas a quitar los permisos de ejecución y lectura para otros. Sin embargo, le vas a dar los permisos de write para otros (Haz esto con la forma octal de los permisos). ¿Podrá el usuario `barcenas` crear contenido sobre la carpeta? 

---

## Ejercicio 2 (5,5pts)

#### Apartado a) (0,5pts)

Cambia al usuario `barcenas`  y haz un `newgrp` al grupo `gurtel` y crea de forma absoluta, la carpeta `/traidores/gurtel`. Dale los permisos `771`.

#### Apartado b)  (1pts)

1 (Haz capturas de pantalla)- Mediante el usuario `rajoy`, crea los siguientes archivos de forma relativa dentro de la carpeta `/traidores/gurtel`:

- dinero_involucrado.txt-> Para crear este archivo, usarás `nano` y escribirás dentro "Más de 200 millones de euros".
- frase_mitica_aitore_esteban.txt-> Para crear este archivo, usarás `cat`  y escribirás  "Si bien me quieres mariano, da menos leña y más grano".
- respuesta_mitica_rajoy.txt-> Para crear este archivo, usarás `echo` con las redirecciones necesarias y escribirás dentro. "Si quieres grano Aitor, te dejaré mi tractor"

Debes asegurarte de que el propietario de estos tres archivos sera rajoy.

#### Apartado c)  0,5pts)

1- Mediante el usuario `rajoy` y con `chown`, cambia el grupo propietario de los siguientes archivos a `gurtel` (deja el propietario igual)

- dinero_involucrado.txt
- respuesta_mitica_rajoy.txt

#### Apartado d) (1,5pts)

1-Da los siguientes permisos a cada uno de los archivos, siempre usando la forma octal de los permisos:

- dinero_involucrado.txt: u=rwx g=rw o=rw
- frase_mitica_aitore_esteban.txt: u=rwx g=rwx o=-
- respuesta_mitica_rajoy.txt: u=- g=- o=rwx

2-Cambia al usuario `koldo`, ¿puede acceder a  la carpeta `/traidores/gurtel` ? Justifícalo con los permisos necesarios

3-¿Puede `koldo` borrar el archivo `dinero_involcurado.txt`? ¿y cambiar el contenido de dicho archivo?

4- ¿Puede `barcenas` leer el contenido de `frase_mitica_aitore_esteban.txt`?

4-¿Puede `rajoy` leer el contenido del archivo `respuesta_mitica_rajoy.txt`?

#### **Apartado e) (1pts)**

1- Con el usuario `abalos`, en `/home/abalos/.bashrc` añade `umask 077`.

2- Recarga el `.bashrc`

3- Crea en `/traidores`:

- La carpeta `/nueva_trama` ¿Qué permisos tendrá por defecto la carpeta creada?
- Crea dentro de `/nueva_trama`. El txt `mis_secretos.txt`. ¿Qué permisos tiene por defecto?

**Apartado f) (1pts)**

1-Explica de forma teórica el proceso de añadir a un grupo una contraseña y administrador, ¿qué ventajas tiene añadir a un administrador a un grupo?